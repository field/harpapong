<!DOCTYPE html>
<html>
<head>
	<title>PONG test</title>


	<script src="../common/GamePong.js"></script>
	<script src="../common/CanvasRenderer.js"></script>

	<script>

	var game, renderer;
	var lastUpdate;

	document.addEventListener("DOMContentLoaded", function() {

		game = Game.init();
		game.startGame();
		renderer = CanvasRenderer.init();

		document.getElementById("container").appendChild(renderer.canvas);

		document.addEventListener("mousemove", onMouseMove);

		lastUpdate = Date.now();

		animate();
	});


	function animate() {

		window.requestAnimationFrame(animate);

		var dt = Date.now() - lastUpdate;

		game.update(dt);
		renderer.render(game);

		lastUpdate = Date.now();

	}

	function onMouseMove(e) {

		var x = e.clientX / window.innerWidth;

		game.setPlayerPosition("a", x);
		game.setPlayerPosition("b", x);

	}

	</script>

</head>
<body>

<div id="container">

</div>

</body>
</html>